000100151105     H option(*noDebugIo)
000200151105      *-------------------------------------------------------------------------
000300151105      *
000400151112      *  Description: Evergreen 834 Export. Clean Incremental File.
000500151105      *  Programmer.: John Torres
000600151105      *  Date.......: 10/30/2015
000700151105      *
000800151112      *  Overview...: When records run for the day, they are written (or updated) to file
000900151105      *    evrgrenxps. This file holds records permanently so that the job knows not to resend
001000151112      *    to Valence. If records need to be resent, evrgrenxps needs to have those daily records
001100151112      *    deleted.
001200151105      *
001300151105      *-------------------------------------------------------------------------
001400151105      * Modifications
001500151105      *
001600151105      * Date         Programmer    Mod      Description
001700151105      *-------------------------------------------------------------------------
001800151105      *
001900151105      *
002000151105      *-------------------------------------------------------------------------
002100151105
002200170111     Fevrgrenxpnuf   e           k disk    rename(evgxpts:savedFile)
002300151105
002400151105      *-------------------------------------------------------------------------
002500151112
002600151112     d todaysDate      S              8
002700151112
002800151112      *-------------------------------------------------------------------------
002900151112
003000151124       exsr init;
003100151124       exsr main;
003200151124       exsr exit;
003300151124
003400151124       // =====================
003500151124       // subroutine exit
003600151124       // =====================
003700151124
003800151124       begsr main;
003900151105
004000151124        setll *loval savedFile;
004100151124        read savedFile;
004200151112
004300151124        dow not %eof;
004400151112
004500151124        if todaysDate = evtdate;
004600151124         delete savedFile;
004700151124        endif;
004800151112
004900151124        read savedFile;
005000151124        enddo;
005100151112
005200151124       endsr;
005300151124
005400151124       // =====================
005500151124       // subroutine exit
005600151124       // =====================
005700151124
005800151124       begsr exit;
005900151124
006000151124        *inlr = *on;
006100151124        return;
006200151124
006300151124       endsr;
006400151124
006500151124       // =====================
006600151124       // subroutine init
006700151124       // =====================
006800151124
006900151124       begsr init;
007000151124
007100151124        todaysDate =  %char(%dec(%date: *iso));
007200151124
007300151124       endsr;
007400151105
007500151124       // =====================
007600151124
